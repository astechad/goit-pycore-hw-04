import sys
from pathlib import Path
from colorama import init, Fore, Style

# –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î–º–æ –±—ñ–±–ª—ñ–æ—Ç–µ–∫—É colorama –¥–ª—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ –∫–æ–ª—å–æ—Ä—ñ–≤ —É –≤–∏–≤–µ–¥–µ–Ω–Ω—ñ
init(autoreset=True)

def display_directory_structure(path, indent_level=0):
    try:
        # –°—Ç–≤–æ—Ä—é—î–º–æ –æ–±'—î–∫—Ç Path –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ —à–ª—è—Ö–æ–º –¥–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó
        directory = Path(path)

        # –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ —ñ—Å–Ω—É—î –≤–∫–∞–∑–∞–Ω–∏–π —à–ª—è—Ö —ñ —á–∏ —î –≤—ñ–Ω –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—î—é
        if not directory.exists() or not directory.is_dir():
            print(Fore.RED + f"–®–ª—è—Ö '{path}' –Ω–µ —ñ—Å–Ω—É—î –∞–±–æ –Ω–µ —î –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—î—é.")
            return

        # –û–±—Ö–æ–¥–∏–º–æ –≤—Å—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó
        for item in directory.iterdir():
            # –§–æ—Ä–º—É—î–º–æ –≤—ñ–¥—Å—Ç—É–ø –¥–ª—è –≤—ñ–∑—É–∞–ª—å–Ω–æ–≥–æ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≤–∫–ª–∞–¥–µ–Ω–æ—Å—Ç—ñ
            indent = '    ' * indent_level

            if item.is_dir():
                # –Ø–∫—â–æ —Ü–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è, –≤–∏–≤–æ–¥–∏–º–æ —ó—ó –Ω–∞–∑–≤—É –≤ —Å–∏–Ω—å–æ–º—É –∫–æ–ª—å–æ—Ä—ñ
                print(indent + Fore.BLUE + f"üìÇ {item.name}")
                # –í–∏–∫–ª–∏–∫–∞—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ –¥–ª—è –≤–∫–ª–∞–¥–µ–Ω–∏—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ–π
                display_directory_structure(item, indent_level + 1)
            else:
                # –Ø–∫—â–æ —Ü–µ —Ñ–∞–π–ª, –≤–∏–≤–æ–¥–∏–º–æ –π–æ–≥–æ –Ω–∞–∑–≤—É –≤ –∑–µ–ª–µ–Ω–æ–º—É –∫–æ–ª—å–æ—Ä—ñ
                print(indent + Fore.GREEN + f"üìú {item.name}")

    except Exception as e:
        # –û–±—Ä–æ–±–∫–∞ —ñ–Ω—à–∏—Ö –ø–æ–º–∏–ª–æ–∫
        print(Fore.RED + f"–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –æ–±—Ä–æ–±—Ü—ñ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó: {e}")

if __name__ == "__main__":
    # –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ –≤–∫–∞–∑–∞–Ω–æ —à–ª—è—Ö –¥–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó —è–∫ –∞—Ä–≥—É–º–µ–Ω—Ç –∫–æ–º–∞–Ω–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞
    if len(sys.argv) < 2:
        print(Fore.RED + "–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–∫–∞–∂—ñ—Ç—å —à–ª—è—Ö –¥–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó.")
    else:
        # –û—Ç—Ä–∏–º—É—î–º–æ —à–ª—è—Ö –∑ –∞—Ä–≥—É–º–µ–Ω—Ç—ñ–≤ –∫–æ–º–∞–Ω–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞
        directory_path = sys.argv[1]
        # –í–∏–∫–ª–∏–∫–∞—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó
        display_directory_structure(directory_path)
